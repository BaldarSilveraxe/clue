/* =========================
   THEME TOKENS
========================= */

:root {
  --background: oklch(22% 0.03 260);
  --bodyBG: oklch(17% 0.03 260);
  --bodyFB: oklch(92% 0.02 255);
  --brandFG: oklch(78% 0.07 230);
  --cardBG: oklch(23% 0.03 260);
  --cardHover: oklch(78% 0.03 250);
  --consoleBG: oklch(21% 0.03 260);
  --headerFG: oklch(82% 0.03 250);
  --hoverColor: oklch(82% 0.03 250);
  --inputPlaceholder: oklch(65% 0.02 250);
  --navBG: oklch(20% 0.03 260);
  --navFB: oklch(92% 0.02 255);
  --panelBG: oklch(19% 0.03 260);
  --panelHover: oklch(78% 0.03 250);
  --rowBG: oklch(24% 0.03 260);
  --rowHover: oklch(78% 0.03 250);
}

:root[data-theme="light"] {
  --background: oklch(91% 0.01 255);
  --bodyBG: oklch(93% 0.01 255);
  --bodyFB: oklch(24% 0.03 255);
  --brandFG: oklch(44% 0.07 230);
  --cardBG: oklch(96% 0.01 255);
  --cardHover: oklch(36% 0.03 250);
  --consoleBG: oklch(96% 0.01 255);
  --headerFG: oklch(32% 0.03 250);
  --hoverColor: oklch(34% 0.03 250);
  --inputPlaceholder: oklch(58% 0.02 250);
  --navBG: oklch(95% 0.01 255);
  --navFB: var(--bodyFB);
  --panelBG: oklch(96% 0.01 255);
  --panelHover: oklch(36% 0.03 250);
  --rowBG: oklch(96% 0.01 255);
  --rowHover: oklch(36% 0.03 250);
}

/* derived lines */
:root {
  --line: color-mix(in oklch, var(--bodyFB) 20%, transparent);
  --line-hover: color-mix(in oklch, var(--bodyFB) 28%, transparent);
  --line-strong: var(--line);
}

/* =========================
   GLOBAL RESETS
========================= */

html[data-theme="light"] { color-scheme: light; }
html[data-theme="dark"]  { color-scheme: dark; }

*,
*::before,
*::after { box-sizing: border-box; }

html, body { block-size: 100%; }

body {
  background: var(--bodyBG);
  color: var(--bodyFB);
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto,
               "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
  line-height: 1.5;
  margin: 0;
}

/* =========================
   PAGE LAYOUT
========================= */

.page {
  display: grid;
  grid-template-columns: 1fr;
  grid-template-rows: auto minmax(0, 1fr); /* header + fill */
  min-block-size: 100svh;
}

header {
  background: var(--background);
  border-bottom: 1px solid var(--line-strong);
  color: var(--headerFG);
  padding: clamp(8px, 1.5vw, 16px);
  position: sticky;
  top: 0;
  z-index: 10;
}

.bar {
  display: grid;
  grid-template-columns: 1fr auto; /* nav | brand */
  align-items: center;
  gap: clamp(8px, 1.5vw, 16px);
}

/* =========================
   NAV
========================= */

.nav-primary {
  display: flex;
  align-items: center;
  gap: clamp(8px, 1.5vw, 16px);
}

.nav-primary button {
  appearance: none;
  background: var(--navBG);
  border: 1px solid var(--line);
  border-radius: calc(10px / 1.5);
  color: var(--navFB);
  cursor: pointer;
  font: inherit;
  outline: none;
  padding: 6px 6px;
  text-decoration: none;
}

.nav-primary button:hover {
  box-shadow: 0 0 5px var(--hoverColor);
  color: var(--hoverColor);
}

.nav-primary button:focus-visible {
  outline: 2px solid currentColor;
  outline-offset: 3px;
}

.icon {
  inline-size: 1em;
  block-size: 1em;
  display: inline-block;
  fill: currentColor;
  margin-inline-start: 0.4em;
  vertical-align: -0.125em;
}

.brand {
  display: inline-flex;
  align-items: center; /* vertically centered */
  gap: 0.5rem;
  line-height: 1;
  letter-spacing: 0.02em;
  font-weight: 600;
  color: var(--brandFG);
}

/* =========================
   MAIN CONTENT AREA
========================= */

.content {
  display: grid;
  /* critical: rows that can actually shrink/grow */
  grid-auto-rows: minmax(0, 1fr);
  min-block-size: 0; /* allow children to define overflow */
  padding-block-start: clamp(8px, 1.5vw, 16px);
}

/* tab panel = 3-column grid */
.tab-panel {
  display: grid;
  grid-template-columns: 260px 1fr 300px;
  grid-template-areas: "left main right";
  gap: clamp(8px, 1.5vw, 16px);
  align-items: stretch;   /* stretch children vertically */
  block-size: 100%;
  min-block-size: 0;      /* allow internal overflow */
}

[hidden] { display: none !important; }

/* column areas */
.left  { grid-area: left; }
.right { grid-area: right; }

/* shared panel chrome */
.panel {
  display: grid;
  align-content: start;
  gap: clamp(8px, 1.5vw, 16px);
  background: var(--panelBG);
  border: 1px solid var(--line);
  border-radius: 10px;
  padding: clamp(8px, 1.5vw, 16px);
  min-block-size: 0; /* don’t force children to overflow */
}

/* center column: make it a flex column so the canvas can fill */
.panel.main {
  grid-area: main;
  display: flex;
  flex-direction: column;
  min-block-size: 0;
  /* optional: container queries for inner UI */
  container-type: inline-size;
}

/* headings */
.panel h2 {
  margin: 0;
  font-size: clamp(16px, 2vw, 20px);
  letter-spacing: 0.02em;
  padding-bottom: 6px;
  border-bottom: 1px solid var(--line);
}

/* lists & rows */
.list { display: grid; gap: 8px; }

.row {
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 8px;
  align-items: center;
  background: var(--rowBG);
  border: 1px solid var(--line);
  border-radius: 8px;
  padding: 8px 10px;
}

.row:hover {
  color: var(--rowHover);
  border-color: var(--rowHover);
  box-shadow: 0 0 5px var(--rowHover);
}

/* console groups */
.console {
  display: grid;
  grid-template-columns: 1fr auto;
  gap: clamp(8px, 1.5vw, 16px);
  align-items: center;
}

.console input[type="text"],
.console button,
.console textarea {
  background: var(--rowBG);
  border: 1px solid var(--line);
  border-radius: calc(10px / 1.5);
  color: inherit;
  font: inherit;
  padding: 10px 12px;
  inline-size: 100%;
}

.console input[type="text"]::placeholder { color: var(--inputPlaceholder); }

.console input[type="text"]:hover,
.console input[type="text"]:focus-visible,
.console button:hover,
.console button:focus-visible,
.console textarea:hover,
.console textarea:focus-visible {
  border-color: var(--line-hover);
  box-shadow: 0 0 0 1px var(--line-hover) inset;
}

.console button[data-type="theme"] {
  grid-column: 1 / -1;
  inline-size: 100%;
}

/* =========================
   CANVAS AREA
========================= */

.canvas-wrap {
  position: relative;
  flex: 1 1 auto;   /* critical: fill the remaining vertical space */
  min-block-size: 0;
}

.canvas-clueboard {
  display: block;
  background: var(--cardBG);
  border: 1px solid var(--line);
  border-radius: 10px;
  inline-size: 100%;
  block-size: 100%; /* fills the wrapper → fills the column */
}
